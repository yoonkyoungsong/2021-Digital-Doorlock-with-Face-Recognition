# Digital_Doorlock_Control_with_Face_Recognition
Deep Learning Image Processing(DLIP) Project 4.

This is a Tutorial and guidebook for real running of our system.

Prof. y.k.kim 
HGU
2021.06

## Configuration
+ OS:Windows 10 and Ubuntu 
(Basically the program code is nearly same with Windows and Ubuntu. face_recog_realtime.py is the only python program code which is used in Ubuntu.)
(Ubuntu for jetson nano board)
+ Hardware: NVIDIA Jetson Nano, Arduino Uno, Logitech C922 Pro Webcam
+ Python: ver 3.8.10 for Windows / ver 3.6.9 for Ubuntu
+ Numpy: ver 1.20.2 for Windows/ ver 1.19.3 for Ubuntu
+ Python PIL library: ver 8.2.0 for Windows/ ver 5.1.0 for Ubuntu
+ OpenCV: ver 4.5.2 (for Windows and Ubuntu)

We have succesfully built this system in above environment. You have to install above or appropriate environments in Windows and Jetson Nano

## Usage

### 1. Windows
Before running real-time recognition system in Jetson Nano, you should train the authorized persons face in Windows.
Only the pre-trained weight file face-trainer.yml and face_recog_realtime.py and haarcascade_frontalface_default.xml are needed in Jetson nano in real run.

First, create "Face_Images" folder and create folders in "Face_Images" folder and name it as each authorized person's name. 
For Example, I made "Keunho" folder inside "Face_Images". Make as many folders as the authorized users number.
Put their photos inside their own name's folder.  

Now if you run the code "part1_face_recog_detection.py", then it crop the face inside the images.
After that, run "part2_face_training.py", it will output "face-trainner.yml" file. It is trained weight file and it will be used in
"part3_face_recog_realtime.py".

Before run the "part3_face_recog_realtime.py", check the Arduino Nano COM port number of the system.
If you run this, the real-time face recognition will be started. 
There is code lines, which make a video output when the real-time system is running. If you don't want to make an output video, just get rid of it.


### 2. Arduino
Just compile and Upload the doorLock.ino file into Arduino Uno
Be aware of Arduino COM port number when you run the program code in Windows

### 3. Jetson Nano 
After move the "face_recog_realtime.py" file and face-trainer.yml and haarcascade_frontalface_default.xml file to Jetson nano,
Now everything is ready!

You should connect all the devices(Arduino Nano and Webcam) to Jetson Nano before run this code.

First, Open the Terminal in Jetson. Type the following command for Serial Communication



    sudo chmod a+rw /dev/ttyACM0
    
    
    
After that, you just open the face_recog_realtime.py file
Type the followings in the terminal.



    cd DLIP
    
    
    
(type the folder name instead of DLIP that the face_recog_realtime.py and other yml and xml files are located. For our case, the folder name was DLIP)



    python3 face_recog_realtime.py 
    
I also highly recommend to refer to following github,



    https://github.com/AzureWoods/faceRecognition-yolo-facenet#available-funtions




It used Yolo to find and crop face in user image, and training through FaceNet which is made by google.
Training file is generated by SVM Model, and now Real-time Facial Recognition is available.
The algorithms that used in each project is quite different, but overall project or process are quite same.
Also that algorithm uses GPU when train and real-run, so it is also good for real-time system.

    
That's all! 
Good Luck
